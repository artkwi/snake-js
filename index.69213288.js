let e=[{x:2,y:3},{x:2,y:4},{x:2,y:5}];class t{static#e=e;static getObstacles(){return this.#e}static setObstacles(e){this.#e=e}static onObstacle=e=>!!this.getObstacles().some((t=>t.x===e.x&&t.y===e.y))}class s{static points=0;static getPoints(){return this.points}static setPoints(e){this.points=e}}let o={x:7,y:8},n={x:5,y:6};const a=()=>o,l=()=>n,r=()=>{w(a())?(s.setPoints(s.getPoints()+v),f(),c(),d()&&i()):w(l())&&(s.setPoints(s.getPoints()+4*v),f(),n=null)},c=()=>{let e=null;for(;null===e||w(e)||t.onObstacle(e);){e={x:Math.floor(Math.random()*C),y:Math.floor(Math.random()*C)}}(e=>{o={...e}})(e)},d=()=>{if(l())return!1;return Math.floor(2*Math.random())%3==0},i=()=>{let e=null;for(;null===e||w(e)||t.onObstacle(e);){e={x:Math.floor(Math.random()*C),y:Math.floor(Math.random()*C)}}var s;s=e,n={...s}};let y={x:-1,y:0};const m=e=>{switch(e){case"ArrowLeft":0===u().y&&(y={x:0,y:-1});break;case"ArrowRight":0===u().y&&(y={x:0,y:1});break;case"ArrowUp":0===u().x&&(y={x:-1,y:0});break;case"ArrowDown":0===u().x&&(y={x:1,y:0})}};document.addEventListener("keydown",(e=>{const t=e.key;m(t)}));const u=()=>y;addEventListener("click",(e=>{const t=e.target.getAttribute("data-key");let s=null;if(t){switch(Number(t)){case 37:s="ArrowLeft";break;case 39:s="ArrowRight";break;case 38:s="ArrowUp";break;case 40:s="ArrowDown"}s&&m(s)}}));let g=[{x:10,y:10},{x:11,y:10},{x:12,y:10}];const x=()=>g,b=e=>g=[...e],h=()=>{let e=[...x()];const t=u();for(let t=e.length-2;t>=0;t--)e[t+1]={...e[t]};e=e.slice(1);const s={x:e[0].x+t.x,y:e[0].y+t.y};b([s,...e])},w=(e,t)=>{if(!e)return!1;return!!(t?.withoutHead?[...x()].slice(1):x()).some((t=>t.x===e.x&&t.y===e.y))},f=()=>{const e=x();e[e.length]=e[e.length-1],b(e)},p=(e,t)=>{if(e){const{x:s,y:o}=e;document.getElementsByClassName(`board-element-${s}-${o}`)[0].classList.add(t)}},k=()=>{M?(()=>{for(let e=0;e<C;e++)for(let t=0;t<C;t++)document.getElementsByClassName(`board-element-${e}-${t}`)[0].classList.remove("body-segment","food-segment","food-segment--extra","body-segment--head")})():(()=>{const e=document.getElementById("game-board");e.innerHTML="",e.style.gridTemplateColumns=`repeat(${C}, 1fr)`,e.style.gridTemplateRows=`repeat(${C}, 1fr)`;for(let t=0;t<C;t++)for(let s=0;s<C;s++){const o=document.createElement("div");o.classList.add("board-element",`board-element-${t}-${s}`),e.appendChild(o)}})();const e=document.getElementById("x"),o=document.getElementById("y"),n=document.getElementById("points");e&&o&&(e.textContent=x()[0].x,o.textContent=x()[0].y),n.textContent=s.getPoints(),x().map((({x:e,y:t},s)=>{const o=document.getElementsByClassName(`board-element-${e}-${t}`);o.length&&(0===s&&o?.[0].classList?.add("body-segment--head"),o?.[0].classList?.add("body-segment"))})),p(a(),"food-segment"),p(l(),"food-segment--extra"),t.getObstacles().map((({x:e,y:t},s)=>{const o=document.getElementsByClassName(`board-element-${e}-${t}`);o.length&&o?.[0].classList?.add("obstacle")}))},E=()=>{const e=x(),s=w(e[0],{withoutHead:!0}),o=t.onObstacle(e[0],{withoutHead:!0}),n=e[0].x<0||e[0].y<0||e[0].x>=C||e[0].y>=C;(s||n||o)&&confirm("Koniec gry.",(clearInterval(B),void window.location.reload()))},L=document.getElementById("play-music-button"),$=document.getElementById("player");L.addEventListener("click",(e=>{$.paused?($.play(),L.textContent="Pause music"):($.pause(),L.textContent="Play music")})),window.addEventListener("keyup",(function(e){document.querySelector(`.arrow-key[data-key="${e.keyCode}"]`).classList.remove("press")})),window.addEventListener("keydown",(function(e){document.querySelector(`.arrow-key[data-key="${e.keyCode}"]`).classList.add("press")}));const C=11,v=2;let M=!1;const B=window.setInterval((()=>{A(),k(),M=!0}),1e3/v),A=()=>{h(),r(),E()};
//# sourceMappingURL=index.69213288.js.map
