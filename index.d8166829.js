let e=[{x:2,y:3},{x:2,y:4},{x:2,y:5}];class t{static#e=e;static getObstacles(){return this.#e}static setObstacles(e){this.#e=e}static onObstacle=e=>!!this.getObstacles().some((t=>t.x===e.x&&t.y===e.y))}class s{static points=0;static getPoints(){return this.points}static setPoints(e){this.points=e}}let n={x:7,y:8},o={x:5,y:6};const a=()=>n,l=()=>o,r=()=>{p(a())?(s.setPoints(s.getPoints()+B),k(),d(),c()&&i()):p(l())&&(s.setPoints(s.getPoints()+4*B),k(),o=null)},d=()=>{let e=null;for(;null===e||p(e)||t.onObstacle(e);){e={x:Math.floor(Math.random()*M),y:Math.floor(Math.random()*M)}}(e=>{n={...e}})(e)},c=()=>{if(l())return!1;return Math.floor(2*Math.random())%3==0},i=()=>{let e=null;for(;null===e||p(e)||t.onObstacle(e);){e={x:Math.floor(Math.random()*M),y:Math.floor(Math.random()*M)}}var s;s=e,o={...s}};let y={x:-1,y:0};const m=()=>{let e="up";return-1===y.y&&(e="left"),1===y.y&&(e="right"),-1===y.x&&(e="up"),1===y.x&&(e="down"),e};let u=y;const g=()=>u,x=e=>{switch(e){case"ArrowLeft":0===g().y&&(y={x:0,y:-1});break;case"ArrowRight":0===g().y&&(y={x:0,y:1});break;case"ArrowUp":0===g().x&&(y={x:-1,y:0});break;case"ArrowDown":0===g().x&&(y={x:1,y:0})}};document.addEventListener("keydown",(e=>{const t=e.key;x(t)}));addEventListener("click",(e=>{const t=e.target.getAttribute("data-key");let s=null;if(t){switch(Number(t)){case 37:s="ArrowLeft";break;case 39:s="ArrowRight";break;case 38:s="ArrowUp";break;case 40:s="ArrowDown"}s&&x(s)}}));let b=[{x:10,y:10},{x:11,y:10},{x:12,y:10}];const h=()=>b,w=e=>b=[...e],f=()=>{let e=[...h()];const t=y;for(let t=e.length-2;t>=0;t--)e[t+1]={...e[t]};e=e.slice(1);const s={x:e[0].x+t.x,y:e[0].y+t.y};w([s,...e])},p=(e,t)=>{if(!e)return!1;return!!(t?.withoutHead?[...h()].slice(1):h()).some((t=>t.x===e.x&&t.y===e.y))},k=()=>{const e=h();e[e.length]=e[e.length-1],w(e)},E=(e,t)=>{if(e){const{x:s,y:n}=e;document.getElementsByClassName(`board-element-${s}-${n}`)[0].classList.add(t)}},L=()=>{A?(()=>{for(let e=0;e<M;e++)for(let t=0;t<M;t++)document.getElementsByClassName(`board-element-${e}-${t}`)[0].classList.remove("body-segment","food-segment","food-segment--extra","body-segment--head","body-segment--head-left","body-segment--head-right","body-segment--head-up","body-segment--head-down")})():(()=>{const e=document.getElementById("game-board");e.innerHTML="",e.style.gridTemplateColumns=`repeat(${M}, 1fr)`,e.style.gridTemplateRows=`repeat(${M}, 1fr)`;for(let t=0;t<M;t++)for(let s=0;s<M;s++){const n=document.createElement("div");n.classList.add("board-element",`board-element-${t}-${s}`),e.appendChild(n)}})();const e=document.getElementById("x"),n=document.getElementById("y"),o=document.getElementById("points");e&&n&&(e.textContent=h()[0].x,n.textContent=h()[0].y),o.textContent=s.getPoints(),h().map((({x:e,y:t},s)=>{const n=document.getElementsByClassName(`board-element-${e}-${t}`);n.length&&(0===s&&n?.[0].classList?.add("body-segment--head",`body-segment--head-${m()}`),n?.[0].classList?.add("body-segment"))})),E(a(),"food-segment"),E(l(),"food-segment--extra"),t.getObstacles().map((({x:e,y:t},s)=>{const n=document.getElementsByClassName(`board-element-${e}-${t}`);n.length&&n?.[0].classList?.add("obstacle")}))},$=()=>{const e=h(),s=p(e[0],{withoutHead:!0}),n=t.onObstacle(e[0],{withoutHead:!0}),o=e[0].x<0||e[0].y<0||e[0].x>=M||e[0].y>=M;(s||o||n)&&confirm("Koniec gry.",(clearInterval(P),void window.location.reload()))},C=document.getElementById("play-music-button"),v=document.getElementById("player");C.addEventListener("click",(e=>{v.paused?(v.play(),C.textContent="Pause music"):(v.pause(),C.textContent="Play music")})),window.addEventListener("keyup",(function(e){document.querySelector(`.arrow-key[data-key="${e.keyCode}"]`).classList.remove("press")})),window.addEventListener("keydown",(function(e){document.querySelector(`.arrow-key[data-key="${e.keyCode}"]`).classList.add("press")}));const M=11,B=2;let A=!1;const P=window.setInterval((()=>{I(),L(),A=!0}),1e3/B),I=()=>{f(),r(),$()};
//# sourceMappingURL=index.d8166829.js.map
