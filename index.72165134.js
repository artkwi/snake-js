let e={x:-1,y:0};const t=()=>{let t="up";return-1===e.y&&(t="left"),1===e.y&&(t="right"),-1===e.x&&(t="up"),1===e.x&&(t="down"),t};let s=e;const n=()=>s,o=t=>{switch(t){case"ArrowLeft":0===n().y&&(e={x:0,y:-1});break;case"ArrowRight":0===n().y&&(e={x:0,y:1});break;case"ArrowUp":0===n().x&&(e={x:-1,y:0});break;case"ArrowDown":0===n().x&&(e={x:1,y:0})}};document.addEventListener("keydown",(e=>{const t=e.key;o(t)}));addEventListener("click",(e=>{const t=e.target.getAttribute("data-key");let s=null;if(t){switch(Number(t)){case 37:s="ArrowLeft";break;case 39:s="ArrowRight";break;case 38:s="ArrowUp";break;case 40:s="ArrowDown"}s&&o(s)}}));let a=[{x:10,y:10},{x:11,y:10},{x:12,y:10}];const l=()=>a,r=e=>a=[...e],d=()=>{let t=[...l()];const n=e;for(let e=t.length-2;e>=0;e--)t[e+1]={...t[e]};t=t.slice(1);const o={x:t[0].x+n.x,y:t[0].y+n.y};var a;r([o,...t]),(a=n)&&(s={...a})},c=(e,t)=>{if(!e)return!1;return!!(t?.withoutHead?[...l()].slice(1):l()).some((t=>t.x===e.x&&t.y===e.y))},i=()=>{const e=l();e[e.length]=e[e.length-1],r(e)};let y=[{x:2,y:3},{x:2,y:4},{x:2,y:5}];class m{static#e=y;static getObstacles(){return this.#e}static setObstacles(e){this.#e=e}static onObstacle=e=>!!this.getObstacles().some((t=>t.x===e.x&&t.y===e.y))}class u{static points=0;static getPoints(){return this.points}static setPoints(e){this.points=e}}let g={x:7,y:8},x={x:5,y:6};const b=()=>g,h=()=>x,w=()=>{c(b())?(u.setPoints(u.getPoints()+B),i(),f(),p()&&k()):c(h())&&(u.setPoints(u.getPoints()+4*B),i(),x=null)},f=()=>{let e=null;for(;null===e||c(e)||m.onObstacle(e);){e={x:Math.floor(Math.random()*M),y:Math.floor(Math.random()*M)}}(e=>{g={...e}})(e)},p=()=>{if(h())return!1;return Math.floor(2*Math.random())%3==0},k=()=>{let e=null;for(;null===e||c(e)||m.onObstacle(e);){e={x:Math.floor(Math.random()*M),y:Math.floor(Math.random()*M)}}var t;t=e,x={...t}},E=(e,t)=>{if(e){const{x:s,y:n}=e;document.getElementsByClassName(`board-element-${s}-${n}`)[0].classList.add(t)}},L=()=>{A?(()=>{for(let e=0;e<M;e++)for(let t=0;t<M;t++)document.getElementsByClassName(`board-element-${e}-${t}`)[0].classList.remove("body-segment","food-segment","food-segment--extra","body-segment--head","body-segment--head-left","body-segment--head-right","body-segment--head-up","body-segment--head-down")})():(()=>{const e=document.getElementById("game-board");e.innerHTML="",e.style.gridTemplateColumns=`repeat(${M}, 1fr)`,e.style.gridTemplateRows=`repeat(${M}, 1fr)`;for(let t=0;t<M;t++)for(let s=0;s<M;s++){const n=document.createElement("div");n.classList.add("board-element",`board-element-${t}-${s}`),e.appendChild(n)}})();const e=document.getElementById("x"),s=document.getElementById("y"),n=document.getElementById("points");e&&s&&(e.textContent=l()[0].x,s.textContent=l()[0].y),n.textContent=u.getPoints(),l().map((({x:e,y:s},n)=>{const o=document.getElementsByClassName(`board-element-${e}-${s}`);o.length&&(0===n&&o?.[0].classList?.add("body-segment--head",`body-segment--head-${t()}`),o?.[0].classList?.add("body-segment"))})),E(b(),"food-segment"),E(h(),"food-segment--extra"),m.getObstacles().map((({x:e,y:t},s)=>{const n=document.getElementsByClassName(`board-element-${e}-${t}`);n.length&&n?.[0].classList?.add("obstacle")}))},$=()=>{const e=l(),t=c(e[0],{withoutHead:!0}),s=m.onObstacle(e[0],{withoutHead:!0}),n=e[0].x<0||e[0].y<0||e[0].x>=M||e[0].y>=M;(t||n||s)&&confirm("Koniec gry.",(clearInterval(P),void window.location.reload()))},v=document.getElementById("play-music-button"),C=document.getElementById("player");v.addEventListener("click",(e=>{C.paused?(C.play(),v.textContent="Pause music"):(C.pause(),v.textContent="Play music")})),window.addEventListener("keyup",(function(e){document.querySelector(`.arrow-key[data-key="${e.keyCode}"]`).classList.remove("press")})),window.addEventListener("keydown",(function(e){document.querySelector(`.arrow-key[data-key="${e.keyCode}"]`).classList.add("press")}));const M=11,B=2;let A=!1;const P=window.setInterval((()=>{I(),L(),A=!0}),1e3/B),I=()=>{d(),w(),$()};
//# sourceMappingURL=index.72165134.js.map
